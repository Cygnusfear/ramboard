# 01.01 Ticket Parser

> **Feature Area:** [[../README|01-Core-Server]]
> **Feature ID:** 01.01

## Behavior

### Contract
- **Input:** Path to a `.tickets/` directory
- **Output:** Array of parsed `Ticket` objects with frontmatter metadata + markdown body
- **Preconditions:** Directory exists, contains `*.md` files with YAML frontmatter
- **Postconditions:** All valid tickets parsed; malformed files logged and skipped

### Scenarios
- Valid ticket with all fields → full Ticket object returned
- Ticket missing optional fields (assignee, deps) → defaults applied
- Malformed YAML → skip file, log warning
- Empty `.tickets/` dir → return empty array
- File without frontmatter delimiter → skip

## Data Shape

```typescript
interface Ticket {
  id: string
  status: 'open' | 'in_progress' | 'closed' | 'cancelled'
  type: string
  priority: number        // 0=urgent, 1=high, 2=medium, 3=low
  tags: string[]
  deps: string[]
  links: string[]
  created: string         // ISO date
  assignee?: string
  title: string           // extracted from first # heading
  body: string            // raw markdown after frontmatter
  project: string         // injected by API layer
}
```

## Decisions

### ADR-1: Parse on every request, no cache
- **Status:** Accepted
- **Context:** Tickets are small text files (<10KB each). Disk reads are sub-millisecond.
- **Decision:** No in-memory cache for v1. Read from disk every API call.
- **Consequences:** Always fresh data. No cache invalidation complexity. Can add fswatch cache later.
- **Alternatives:** SQLite index, in-memory Map with fswatch — deferred to P3.
